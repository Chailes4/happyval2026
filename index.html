<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy Valentine's Day</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&amp;family=Dancing+Script:wght@400;600;700&amp;display=swap" rel="stylesheet">
  <style>
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }
    @keyframes pulse-heart {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }
    @keyframes slide-up {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-10px) scale(1.05); }
    }
    @keyframes float-up {
      0% {
        transform: translateY(100vh) rotate(0deg) translateX(0);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-100vh) rotate(360deg) translateX(100px);
        opacity: 0;
      }
    }
    @keyframes envelope-open {
      0% { transform: rotateX(0deg); }
      100% { transform: rotateX(-140deg); }
    }
    .pulse-heart {
      animation: pulse-heart 2s ease-in-out infinite;
    }
    .bounce-heart {
      animation: bounce 1s ease-in-out infinite;
    }
    .sparkle {
      animation: sparkle 2s ease-in-out infinite;
    }
    .slide-up {
      animation: slide-up 0.8s ease-out forwards;
    }
    .memory-card {
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    .memory-card:hover {
      transform: translateY(-12px) rotate(3deg) scale(2.05);
      box-shadow: 0 20px 60px rgba(220, 38, 38, 0.3), 0 0 0 3px #dc2626;
    }
    .love-message-box {
      background: #fef3c7;
      box-shadow: 0 15px 50px rgba(220, 38, 38, 0.2), 0 0 0 2px #dc2626;
      transition: all 0.4s ease;
    }
    .love-message-box.expanded {
      box-shadow: 0 20px 60px rgba(220, 38, 38, 0.3), 0 0 0 2px #dc2626;
    }
    .floating-hearts-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
      z-index: 1;
    }
    .floating-heart-item {
      position: absolute;
      animation: float-up linear infinite;
    }
    .carousel-container {
      position: relative;
      overflow: hidden;
      border-radius: 1.5rem;
    }
    .carousel-track {
      display: flex;
      transition: transform 0.5s ease-out;
    }
    .carousel-slide {
      min-width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
       flex-shrink:0;
    }
    .carousel-placeholder {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #fca5a5;
      font-size: 4rem;
    }
    .carousel-button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.95);
      border: 2px solid #dc2626;
      width: 52px;
      height: 52px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      z-index: 10;
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.25);
      color: #dc2626;
      font-weight: bold;
    }
    .carousel-button:hover {
      background: #dc2626;
      color: white;
      transform: translateY(-50%) scale(1.15);
    }
    .carousel-button-prev {
      left: 1rem;
    }
    .carousel-button-next {
      right: 1rem;
    }
    .carousel-dots {
      position: absolute;
      bottom: 1rem;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 0.5rem;
      z-index: 10;
    }
    .carousel-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.6);
      border: 2px solid white;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .carousel-dot.active {
      background: #dc2626;
      transform: scale(1.3);
    }
    .carousel-counter {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(220, 38, 38, 0.8);
      color: white;
      padding: 0.5rem 1.2rem;
      border-radius: 2rem;
      font-size: 0.875rem;
      font-weight: bold;
      z-index: 10;
    }
    .read-more-btn {
      background: #dc2626;
      color: white;
      font-weight: bold;
      padding: 0.75rem 2rem;
      border-radius: 9999px;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1rem;
    }
    .read-more-btn:hover {
      background: #b91c1c;
      transform: scale(1.05);
    }
    .read-more-btn:active {
      transform: scale(0.98);
    }
    .envelope-flap {
      transform-style: preserve-3d;
      transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    .envelope-flap.open {
      transform: rotateX(-140deg);
    }
    #envelopeOverlay.hide {
      opacity: 0 !important;
      pointer-events: none !important;
    }
  </style>
  <style>body { box-sizing: border-box; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full overflow-auto" style="background: #fef2f2; font-family: 'Playfair Display', serif;"><!-- Floating Hearts Background -->
  <div class="floating-hearts-bg" id="floatingHeartsContainer"></div><!-- Envelope Overlay -->
  <div id="envelopeOverlay" class="fixed inset-0 bg-gray-900/80 backdrop-blur-md flex items-center justify-center z-50 transition-opacity duration-500" style="opacity: 1;">
   <div class="relative w-full max-w-md px-4"><!-- Envelope -->
    <div class="w-96 h-72 mx-auto relative" style="perspective: 1000px;"><!-- Envelope Body -->
     <div class="w-full h-full bg-red-600 rounded-xl shadow-2xl relative border-2 border-red-700 overflow-hidden cursor-pointer" id="envelopeBody" style="box-shadow: 0 20px 60px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.2);"><!-- Envelope Front Pattern -->
      <div class="absolute inset-0 opacity-20" style="background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.1) 10px, rgba(255,255,255,0.1) 20px); pointer-events: none;"></div><!-- Envelope Flap (Top Triangle) -->
      <div id="envelopeFlap" class="envelope-flap absolute top-0 left-0 h-40 bg-gradient-to-b from-red-700 to-red-600" style="clip-path: polygon(0 0, 100% 0, 50% 100%); box-shadow: inset 0 2px 5px rgba(0,0,0,0.2); width: 100%; transform-style: preserve-3d;"><!-- Decorative line on flap -->
       <div class="absolute top-12 left-0 right-0 h-px bg-red-500/50 pointer-events-none" style="width: 100%;"></div>
      </div><!-- Gold Seal -->
      <div id="goldSeal" class="absolute top-28 left-1/2 w-20 h-20 bg-yellow-400 rounded-full shadow-lg border-2 border-yellow-500 flex items-center justify-center z-20 transition-all duration-700" style="transform: translateX(-50%); box-shadow: 0 4px 15px rgba(0,0,0,0.3); cursor: pointer;"><span class="text-4xl pointer-events-none">ğŸ’Œ</span>
      </div><!-- Bottom part of envelope -->
      <div class="absolute bottom-0 left-0 right-0 w-full h-32 bg-red-600 border-t-2 border-red-700 pointer-events-none"></div><!-- Decorative hearts on envelope -->
      <div class="absolute bottom-6 left-6 text-2xl opacity-60 pointer-events-none">
       ğŸ’•
      </div>
      <div class="absolute bottom-6 right-6 text-2xl opacity-60 pointer-events-none">
       ğŸ’•
      </div>
     </div>
    </div><!-- Click to open text -->
    <p class="text-white text-center mt-8 text-lg font-bold pointer-events-none" style="font-family: 'Dancing Script', cursive; animation: bounce 2s infinite;">Click the Envelope to Open ğŸ’•</p>
   </div>
  </div>
  <div class="w-full min-h-full relative overflow-hidden" style="position: relative; z-index: 2;"><!-- Main Content -->
   <main class="relative z-10 px-4 py-12 max-w-4xl mx-auto"><!-- Header -->
    <header class="text-center mb-12 slide-up">
     <div class="inline-flex gap-4 mb-6 justify-center items-center">
      <svg class="pulse-heart" width="60" height="60" viewbox="0 0 24 24" fill="#dc2626" style="animation-delay: 0s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
      </svg><span class="text-6xl bounce-heart">ğŸ‰</span>
      <svg class="pulse-heart" width="60" height="60" viewbox="0 0 24 24" fill="#dc2626" style="animation-delay: 0.3s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
      </svg>
     </div>
     <h1 id="main-title" class="text-6xl md:text-7xl font-bold text-red-700 mb-3" style="font-family: 'Dancing Script', cursive; text-shadow: 3px 3px 6px rgba(220, 38, 38, 0.2);">Happy Valentine's Day!</h1>
     <p id="subtitle" class="text-red-500 text-3xl font-bold" style="font-family: 'Dancing Script', cursive;">ğŸ’• You Make My Heart So Happy ğŸ’•</p>
    </header><!-- Photo Carousel Section -->
    <section class="mb-16 slide-up" style="animation-delay: 0.1s;">
     <h2 class="text-3xl text-red-600 text-center mb-6 font-bold" style="font-family: 'Dancing Script', cursive;">âœ¨ Our Sweetest Moments âœ¨</h2>
     <div class="carousel-container" style="height: 600px; box-shadow: 0 15px 50px rgba(220, 38, 38, 0.3); border: 3px solid #dc2626;">
      <div class="carousel-track flex transition-transform duration-500 ease-in-out" id="carouselTrack">

 <!-- Slide -->
 <div class="carousel-slide min-w-full flex flex-col items-center justify-center p-6">
  <span class="text-6xl mb-3">ğŸ“¸</span>
  <img src="img/1.jpg" class="max-h-[400px] w-auto object-contain rounded-xl"/>
 </div>

 <!-- Slide -->
 <div class="carousel-slide min-w-full flex flex-col items-center justify-center p-6">
  <span class="text-6xl mb-3">ğŸ’•</span>
  <img src="img/2.jpg" class="max-h-[400px] w-auto object-contain rounded-xl"/>
 </div>

 <!-- Slide -->
 <div class="carousel-slide min-w-full flex flex-col items-center justify-center p-6">
  <span class="text-6xl mb-3">ğŸŒ¹</span>
  <img src="img/3.jpg" class="max-h-[400px] w-auto object-contain rounded-xl"/>
 </div>

 <!-- Slide -->
 <div class="carousel-slide min-w-full flex flex-col items-center justify-center p-6">
  <span class="text-6xl mb-3">âœ¨</span>
  <img src="img/4.jpg" class="max-h-[400px] w-auto object-contain rounded-xl"/>
 </div>

 <!-- Slide -->
 <div class="carousel-slide min-w-full flex flex-col items-center justify-center p-6">
  <span class="text-6xl mb-3">ğŸ€</span>
  <img src="img/5.jpg" class="max-h-[400px] w-auto object-contain rounded-xl"/>
 </div>

 <!-- Video Slide -->
 <div class="carousel-slide min-w-full flex flex-col items-center justify-center p-6">
  <span class="text-6xl mb-3">ğŸ¬</span>
  <video controls class="max-h-[400px] w-auto rounded-xl">
    <source src="img/video.mp4" type="video/mp4">
  </video>
 </div>

</div>
      <!-- Navigation Buttons --> <button class="carousel-button carousel-button-prev" id="prevBtn" aria-label="Previous slide">
       <svg width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="15 18 9 12 15 6"></polyline>
       </svg></button> <button class="carousel-button carousel-button-next" id="nextBtn" aria-label="Next slide">
       <svg width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="9 18 15 12 9 6"></polyline>
       </svg></button> <!-- Dots Navigation -->
      <div class="carousel-dots" id="carouselDots"></div><!-- Counter -->
      <div class="carousel-counter" id="carouselCounter">
       1 / 6
      </div>
     </div>
    </section><!-- Love Message Section with Expandable Content -->
    <section class="mb-16 slide-up" style="animation-delay: 0.2s;">
     <div class="love-message-box rounded-3xl p-10 md:p-14 relative" id="loveMessageBox"><!-- Decorative corner elements -->
      <div class="absolute top-4 left-4 text-3xl">
       ğŸ’
      </div>
      <div class="absolute top-4 right-4 text-3xl">
       ğŸ’
      </div>
      <div class="absolute bottom-4 left-4 text-3xl">
       ğŸŒ¹
      </div>
      <div class="absolute bottom-4 right-4 text-3xl">
       ğŸŒ¹
      </div>
      <h2 class="text-4xl md:text-5xl text-red-700 mb-8 text-center font-bold" style="font-family: 'Dancing Script', cursive;">To My Love</h2>
      <div class="max-w-2xl mx-auto">
       <p id="love-message-preview" class="text-red-900 text-lg leading-relaxed text-center mb-6" style="font-family: 'Playfair Display', serif;">You bring so much joy and happiness into my life every single day. From the little moments to the big adventures, every memory with you is truly special...</p>
       <div id="love-message-full" class="hidden">
        <p id="love-message" class="text-red-900 text-lg leading-relaxed text-center mb-4" style="font-family: 'Playfair Display', serif;">You bring so much joy and happiness into my life every single day. From the little moments to the big adventures, every memory with you is truly special. Thank you for being the most wonderful person and for all the love you give. Today and every day, I'm so grateful to celebrate with you. Happy Heart Day's Love!!!ğŸ‰ğŸ’•. I want you to know that loving you is the easiest and most natural thing I've ever done. The way you light up when you smile, the warmth of your hand in mine, the sound of your laughter filling my heart. These are the things that make my heart overflow with gratitude. You've shown me what true love means. You're patient when I'm stressed, you're there when I need you, and you somehow always know exactly what to say to make everything better. You're that person that know better and always right(kaya lagi akong talo ğŸ˜­). With you, I feel truly seen and valued in a way I never thought possible. Every day with you is a gift I never take for granted. Whether we're having adventures or just enjoying a quiet sitting together, every single moment is precious to me. You've become not just my love, but my best friend, my biggest cheerleader, and my safe place. Thank you for choosing me, for loving me unconditionally, and for being the incredible person you are. I promise to spend the rest of my life making you as happy as you make me. You deserve all the love, all the joy, and all the good things in this world. I love you more than words could ever express. Today and every day, forever and always. <br> <br><small> pati aq naiyak sa letter ahahjajjahj</small></p>
       </div>
      </div>
      <div class="text-center mt-8"><button id="readMoreBtn" class="read-more-btn mb-6"> Read Full Letter ğŸ’Œ </button>
      </div>
      <div class="text-center flex justify-center gap-3"><span class="text-3xl">ğŸ’•</span> <span class="text-red-700 text-2xl font-bold" style="font-family: 'Dancing Script', cursive;">Forever &amp; Always</span> <span class="text-3xl">ğŸ’•</span>
      </div>
     </div>
    </section>
    <!-- Happy Memories Section -->
    <section class="mb-16">
     <h2 class="text-4xl text-red-700 text-center mb-10 font-bold" style="font-family: 'Dancing Script', cursive;">ğŸŠ Our Happiest Times ğŸŠ</h2>
     <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="memory-card bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-lg border-3 border-red-300 slide-up" style="animation-delay: 0.3s;">
       <div class="text-center mb-4"><span class="text-6xl">ğŸŒ¸</span>
       </div>
       <p id="memory-1" class="text-red-700 text-center leading-relaxed font-semibold mb-4">When you made me laugh so hard I couldn't breathe</p>
       <div class="flex justify-center gap-2"><span class="text-2xl">ğŸ˜„</span> <span class="text-2xl">ğŸ’•</span> <span class="text-2xl">ğŸ˜„</span>
       </div>
      </div>
      <div class="memory-card bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-lg border-3 border-red-300 slide-up" style="animation-delay: 0.5s;">
       <div class="text-center mb-4"><span class="text-6xl">ğŸ‰</span>
       </div>
       <p id="memory-3" class="text-red-700 text-center leading-relaxed font-semibold mb-4">Every adventure with you feels like a celebration</p>
       <div class="flex justify-center gap-2"><span class="text-2xl">ğŸ‰</span> <span class="text-2xl">ğŸ’•</span> <span class="text-2xl">ğŸ‰</span>
       </div>
      </div>
      <div class="memory-card bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-lg border-3 border-red-300 slide-up" style="animation-delay: 0.8s;">
      <div class="text-center mb-4"><span class="text-6xl">ğŸ¶</span>
      </div>
      <p id="memory-6" class="text-red-700 text-center leading-relaxed font-semibold mb-4">Every song reminds me of you and the moments we share</p>
      <div class="flex justify-center gap-2"><span class="text-2xl">ğŸ¶</span> <span class="text-2xl">ğŸ’•</span> <span class="text-2xl">ğŸ¶</span>
      </div>
      </div>
      <div class="memory-card bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-lg border-3 border-red-300 slide-up" style="animation-delay: 0.9s;">
      <div class="text-center mb-4"><span class="text-6xl">ğŸ“¸</span>
      </div>
      <p id="memory-7" class="text-red-700 text-center leading-relaxed font-semibold mb-4">Every picture of us holds a thousand happy feelings</p>
      <div class="flex justify-center gap-2"><span class="text-2xl">ğŸ“¸</span> <span class="text-2xl">ğŸ’•</span> <span class="text-2xl">ğŸ“¸</span>
      </div>
      </div>
      <div class="memory-card bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-lg border-3 border-red-300 slide-up" style="animation-delay: 1s;">
      <div class="text-center mb-4"><span class="text-6xl">ğŸ’Œ</span>
      </div>
      <p id="memory-8" class="text-red-700 text-center leading-relaxed font-semibold mb-4">Your messages always brighten my day instantly</p>
      <div class="flex justify-center gap-2"><span class="text-2xl">ğŸ’Œ</span> <span class="text-2xl">ğŸ’•</span> <span class="text-2xl">ğŸ’Œ</span>
      </div>
      </div>
      <div class="memory-card bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-lg border-3 border-red-300 slide-up" style="animation-delay: 1.1s;">
      <div class="text-center mb-4"><span class="text-6xl">ğŸŒˆ</span>
      </div>
      <p id="memory-9" class="text-red-700 text-center leading-relaxed font-semibold mb-4">Life feels more colorful and beautiful with you in it</p>
      <div class="flex justify-center gap-2"><span class="text-2xl">ğŸŒˆ</span> <span class="text-2xl">ğŸ’•</span> <span class="text-2xl">ğŸŒˆ</span>
      </div>
      </div>
     </div>
    </section><!-- Footer -->
    <footer class="text-center slide-up" style="animation-delay: 0.6s;">
     <div class="bg-red-100 rounded-full py-6 px-10 inline-block shadow-lg border-3 border-red-400">
      <p id="footer-message" class="text-red-700 text-2xl font-bold" style="font-family: 'Dancing Script', cursive;">Happy Valentine's Day to the Love of My Life! ğŸ’•</p>
     </div>
     <div class="mt-8 flex justify-center gap-3 text-4xl"><span class="bounce-heart" style="animation-delay: 0s;">ğŸ’•</span> <span class="bounce-heart" style="animation-delay: 0.2s;">â¤ï¸</span> <span class="bounce-heart" style="animation-delay: 0.4s;">ğŸ’•</span> <span class="bounce-heart" style="animation-delay: 0.6s;">â¤ï¸</span> <span class="bounce-heart" style="animation-delay: 0.8s;">ğŸ’•</span>
     </div>
    </footer>
   </main>
  </div>
  <script>
    let currentSlide = 0;
    const totalSlides = 6;
    let letterExpanded = false;

    // Envelope opening functionality
    function setupEnvelopeOpening() {
      const overlay = document.getElementById('envelopeOverlay');
      const flap = document.getElementById('envelopeFlap');
      const body = document.getElementById('envelopeBody');
      const seal = document.getElementById('goldSeal');

      function openEnvelope() {
        flap.classList.add('open');
        seal.style.opacity = '0';
        seal.style.transform = 'translateX(-50%) translateY(50px)';
        
        setTimeout(() => {
          overlay.classList.add('hide');
        }, 1200);
      }

      body.addEventListener('click', openEnvelope);
      seal.addEventListener('click', (e) => {
        e.stopPropagation();
        openEnvelope();
      });
    }

    // Create floating hearts background
    function createFloatingHearts() {
      const container = document.getElementById('floatingHeartsContainer');
      const heartColors = ['#dc2626', '#f87171', '#fca5a5', '#fcb5c7'];
      const heartSizes = [20, 30, 40, 50];
      
      function addHeart() {
        const heart = document.createElement('div');
        const randomColor = heartColors[Math.floor(Math.random() * heartColors.length)];
        const randomSize = heartSizes[Math.floor(Math.random() * heartSizes.length)];
        const randomLeft = Math.random() * 100;
        const randomDuration = 8 + Math.random() * 6;
        
        heart.className = 'floating-heart-item';
        heart.innerHTML = `<svg width="${randomSize}" height="${randomSize}" viewBox="0 0 24 24" fill="${randomColor}"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>`;
        
        heart.style.left = randomLeft + '%';
        heart.style.animationDuration = randomDuration + 's';
        heart.style.animationDelay = Math.random() * 2 + 's';
        
        container.appendChild(heart);
        
        setTimeout(() => {
          heart.remove();
        }, (randomDuration + 2) * 1000);
      }
      
      for (let i = 0; i < 6; i++) {
        setTimeout(() => addHeart(), i * 300);
      }
      
      setInterval(addHeart, 1500);
    }

    function initCarousel() {
      const dotsContainer = document.getElementById('carouselDots');
      for (let i = 0; i < totalSlides; i++) {
        const dot = document.createElement('div');
        dot.className = `carousel-dot ${i === 0 ? 'active' : ''}`;
        dot.addEventListener('click', () => goToSlide(i));
        dotsContainer.appendChild(dot);
      }

      document.getElementById('prevBtn').addEventListener('click', prevSlide);
      document.getElementById('nextBtn').addEventListener('click', nextSlide);

      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') prevSlide();
        if (e.key === 'ArrowRight') nextSlide();
      });
    }

    function updateCarousel() {
      const track = document.getElementById('carouselTrack');
      track.style.transform = `translateX(-${currentSlide * 100}%)`;

      document.querySelectorAll('.carousel-dot').forEach((dot, index) => {
        dot.classList.toggle('active', index === currentSlide);
      });

      document.getElementById('carouselCounter').textContent = `${currentSlide + 1} / ${totalSlides}`;
    }

    function nextSlide() {
      currentSlide = (currentSlide + 1) % totalSlides;
      updateCarousel();
    }

    function prevSlide() {
      currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
      updateCarousel();
    }

    function goToSlide(index) {
      currentSlide = index;
      updateCarousel();
    }

    // Read More Letter functionality
    document.getElementById('readMoreBtn').addEventListener('click', function() {
      const fullLetter = document.getElementById('love-message-full');
      const preview = document.getElementById('love-message-preview');
      const btn = this;
      const box = document.getElementById('loveMessageBox');

      if (letterExpanded) {
        fullLetter.classList.add('hidden');
        preview.classList.remove('hidden');
        btn.textContent = 'Read Full Letter ğŸ’Œ';
        letterExpanded = false;
        box.classList.remove('expanded');
      } else {
        preview.classList.add('hidden');
        fullLetter.classList.remove('hidden');
        btn.textContent = 'Show Less â¬†ï¸';
        letterExpanded = true;
        box.classList.add('expanded');
        
        setTimeout(() => {
          document.getElementById('loveMessageBox').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }, 100);
      }
    });

    async function onConfigChange(config) {
      const loveMsg = config.love_message || defaultConfig.love_message;
      const firstParagraph = loveMsg.split('\n\n')[0] + '...';
      
      document.getElementById('main-title').textContent = config.main_title || defaultConfig.main_title;
      document.getElementById('subtitle').textContent = config.subtitle || defaultConfig.subtitle;
      document.getElementById('love-message-preview').textContent = firstParagraph;
      document.getElementById('love-message').textContent = loveMsg;
      document.getElementById('memory-1').textContent = config.memory_1 || defaultConfig.memory_1;
      document.getElementById('memory-2').textContent = config.memory_2 || defaultConfig.memory_2;
      document.getElementById('memory-3').textContent = config.memory_3 || defaultConfig.memory_3;
      document.getElementById('footer-message').textContent = config.footer_message || defaultConfig.footer_message;

      const bgColor = config.background_color || defaultConfig.background_color;
      const textColor = config.text_color || defaultConfig.text_color;

      document.body.style.background = bgColor;
      
      document.getElementById('main-title').style.color = textColor;
      document.getElementById('subtitle').style.color = textColor;
      document.getElementById('love-message-preview').style.color = textColor;
      document.getElementById('love-message').style.color = textColor;
      document.querySelectorAll('.memory-card p').forEach(el => el.style.color = textColor);
      document.getElementById('footer-message').style.color = textColor;

      const fontFamily = config.font_family || defaultConfig.font_family;
      const fontSize = config.font_size || defaultConfig.font_size;
      const baseFontStack = 'serif';

      document.body.style.fontFamily = `'${fontFamily}', ${baseFontStack}`;
      document.getElementById('love-message-preview').style.fontSize = `${fontSize * 1.125}px`;
      document.getElementById('love-message').style.fontSize = `${fontSize * 1.125}px`;
      document.querySelectorAll('.memory-card p').forEach(el => el.style.fontSize = `${fontSize}px`);
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => { config.background_color = value; window.elementSdk.setConfig({ background_color: value }); }
          },
          {
            get: () => config.card_color || defaultConfig.card_color,
            set: (value) => { config.card_color = value; window.elementSdk.setConfig({ card_color: value }); }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => { config.text_color = value; window.elementSdk.setConfig({ text_color: value }); }
          },
          {
            get: () => config.accent_color || defaultConfig.accent_color,
            set: (value) => { config.accent_color = value; window.elementSdk.setConfig({ accent_color: value }); }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => { config.font_family = value; window.elementSdk.setConfig({ font_family: value }); }
        },
        fontSizeable: {
          get: () => config.font_size || defaultConfig.font_size,
          set: (value) => { config.font_size = value; window.elementSdk.setConfig({ font_size: value }); }
        }
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ["main_title", config.main_title || defaultConfig.main_title],
        ["subtitle", config.subtitle || defaultConfig.subtitle],
        ["love_message", config.love_message || defaultConfig.love_message],
        ["memory_1", config.memory_1 || defaultConfig.memory_1],
        ["memory_2", config.memory_2 || defaultConfig.memory_2],
        ["memory_3", config.memory_3 || defaultConfig.memory_3],
        ["footer_message", config.footer_message || defaultConfig.footer_message]
      ]);
    }

    initCarousel();
    createFloatingHearts();
    setupEnvelopeOpening();

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cd0e7f0b418bc46',t:'MTc3MDk0OTg1MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>